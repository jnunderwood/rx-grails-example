# Example Application using RxJava for Grails and RxGORM for REST

## Description

This is an example application running on Java 8 using the following...

Client

- [Grails 3.3.5](https://grails.org)
- [RxJava for Grails 2.0.0](https://grails-plugins.github.io/grails-rxjava/latest)
- [RxGORM for Rest 1.1.0](http://gorm.grails.org/1.1.x/rx/rest-client/manual)

Server

- [micronaut 1.0.0.M1](https://micronaut.io)

The goal is to use _RxJava for Grails_ and _RxGORM for REST_ so that our
domain classes can be backed by a microservice instead of a database. (I also
wanted to try out _micronaut_ for the microservice)

## The Problem: _It Does Not Work_

When accessing
[http://localhost:8080/employee/show/1](http://localhost:8080/employee/show/1),
Chrome developer tools indicate that an HTTP status of `200 [OK]` is being
returned to the browser.

> **_However, the client app fails to render the `show` view._**

## What Works

The micronaut server seems to work as does the communication between the
client and server. For example, when requesting a client URL, such as
[http://localhost:8080/employee/show/1](http://localhost:8080/employee/show/1),
logging indicates the following:

- the client is sending the request to the server
- the server is receiving the request from the client
- the server is sending the response to the client
- the client is receiving the response from the server

## Client

The client runs on `http://localhost:8080` and was generated by:

```shell
$ curl -O start.grails.org/client.zip -d version=3.3.5 -d features=events,geb2
```

I added the following lines to `build.gradle` in the `dependencies` section:

```config
    compile "org.grails.plugins:rx-gorm-rest-client:1.1.0.RELEASE"
    compile "org.grails.plugins:rxjava2:2.0.0"
```

I added the following lines to `application.yml`:

```config
---
grails:
    gorm:
        rest:
            host: http://localhost:3030
            log:
                level: TRACE
```

Controller and views were generated by:

```shell
$ ./grailsw generate-rx-all Employee
```

The [`client.EmployeeController`](client/grails-app/controllers/client/EmployeeController.groovy) was slightly modified to add logging to the
`show` action. The original, generated action behaves similarly, as does the
`index` action. Other actions were unused and removed for simplicity.

## Server

The the server runs on `http://localhost:3030` and was generated by:

```shell
$ mn create-app server --features groovy
```

Added the following lines to `application.yml`:

```config
---
micronaut:
    server:
      port: 3030
```

A [`server.Employee`](server/src/main/groovy/server/Employee.groovy) object,
with a `name` field, and a
[`server.EmployeeController`](server/src/main/groovy/server/EmployeeController.groovy)
were written. They are _very_ simple.
